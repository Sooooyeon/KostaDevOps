<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=s, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <h1>실시간 데이터 시각화</h1>
  <canvas id="chartcanvas" width="600" height="400" border="1"></canvas>

  <script>
    var chartcanvas = document.getElementById('chartcanvas');
    var chartContext = chartcanvas.getContext('2d');

    var chartworker = new Worker('24.worker.js')

    function SendData(){
      // var dataPoint = {x : Math.random() * chartcanvas.width , y : Math.random() * chartcanvas.height};
      var dataPoint = {x : chartcanvas.width , y : chartcanvas.height};
      chartworker.postMessage(dataPoint);
    }

    chartworker.onmessage = function(event){
      var rcvData = event.data;
      updateChart(rcvData);
    }
    
    function updateChart(rcvData){
      chartContext.beginPath();
      chartContext.arc(rcvData.x, rcvData.y, 5, 0, Math.PI*2);
      chartContext.fillStyle = 'blue';
      chartContext.fill();
      chartContext.closePath();
    }

    setInterval(SendData, 1000);
  </script>
</body>
</html>