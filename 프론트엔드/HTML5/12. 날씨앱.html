<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>현재 날씨 정보</title>
</head>
<body>
  <h1>현재 날씨 정보</h1>
  <p id="weather"></p>

  <script>
    function CurPosition(position){
      var lat = position.coords.latitude; //위도
      var lng = position.coords.longitude; //경도
      var apikey ="dbd7a97a91c0ac08a69d01e9a6845086"
      var apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&units=metric&appid=${apikey}`;

      fetch(apiUrl).then((response) => {return response.json()}).then((data)=>{
        console.log(data);
        var weatherDescription = data.weather[0].description;
        var temperature = data.main.temp;
        var cityName = data.name;
        document.getElementById("weather").innerHTML =`도시: ${cityName}<br>날씨 : ${weatherDescription}<br>온도: ${temperature}C`;
      }).catch((error)=>{
        console.log("날씨 정보를 가져오는 중 오류 발생:", error);
        document.getElementById("weather").innerHTML = "날씨 정보를 가져올 수 없습니다."
      })
    }

    function getLocation(){
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(CurPosition)
      }
    }
    getLocation();
  </script>
</body>
</html>